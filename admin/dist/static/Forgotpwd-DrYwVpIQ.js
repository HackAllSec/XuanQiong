import{d as Z,u as F,r as u,c as I,f as p,w as d,g as o,h as N,b as w,e as x,ag as $,p as y,n as h,t as g,ah as D,ac as L,v as a,x as M,y as S,ai as T,af as j,_ as q}from"./index-Q_c8yLbb.js";import{a as V}from"./el-message-ZkJEpQUo.js";/* empty css                *//* empty css                     */const G={class:"forgot-container"},H={style:{display:"flex","align-items":"center"}},J={class:"forgot-option"},K=Z({__name:"Forgotpwd",setup(O){const{t:e}=F(),l=u(""),n=u(""),r=u(""),f=u(""),m=u(!0),v=u(0);function k(){if(r.value==""){a.error(e("app.webui.emailempty"));return}if(!r.value.match(/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/)){a.error(e("app.webui.emailformat"));return}}function _(){return l.value==""?(a.error(e("app.webui.passwordempty")),!1):l.value.length<8?(a.error(e("app.webui.passwordlength")),!1):l.value.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,}$/)?!0:(a.error(e("app.webui.passwordcomplex")),!1)}function z(){if(l.value!=n.value){a.error(e("app.webui.passwordnotmatch"));return}}async function B(){if(r.value==""){a.error(e("app.webui.emailempty"));return}try{(await V.get("/api/v1/getcaptcha?email="+r.value)).data.code==1?(a.success(e("app.webui.captchasucc")),v.value=Date.now()+1e3*120,m.value=!1):a.error(e("app.webui.captchafail"))}catch{}}async function C(){if(l.value==""||n.value==""||r.value==""){a.error(e("app.webui.missingnotice"));return}if(l.value!=n.value){a.error(e("app.webui.passwordnotmatch"));return}if(_())try{const i={password:n.value,email:r.value,captcha:f.value};(await V.post("/api/v1/forgetpassword",i)).data.code==1?a.success(e("app.webui.submitsuccess")):a.error(e("app.webui.restfail"))}catch{a.error(e("app.webui.restfail"))}}return(i,t)=>{const c=M,b=S,E=T,A=j,U=N;return w(),I("div",G,[p(U,{class:"forgot-card",header:o(e)("app.webui.forgot"),shadow:"always"},{default:d(()=>[x("div",H,[p(c,{style:{width:"75%","margin-left":"10%",padding:"15px"},modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),maxlength:"50",placeholder:o(e)("app.webui.email"),size:"large","prefix-icon":o($),clearable:"",onBlur:k},null,8,["modelValue","placeholder","prefix-icon"]),m.value?(w(),y(b,{key:0,style:{width:"15%"},type:"primary",size:"small",onClick:B},{default:d(()=>[h(g(o(e)("app.webui.getcaptcha")),1)]),_:1})):(w(),y(E,{key:1,format:"ss",value:v.value,onFinish:t[1]||(t[1]=s=>m.value=!0),"value-style":"font-size: 14px;"},null,8,["value"]))]),p(c,{style:{width:"75%","margin-left":"10%",padding:"15px"},modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),maxlength:"50",placeholder:o(e)("app.webui.captcha"),size:"large","prefix-icon":i.Camera,clearable:""},null,8,["modelValue","placeholder","prefix-icon"]),p(c,{style:{width:"75%","margin-left":"10%",padding:"15px"},modelValue:l.value,"onUpdate:modelValue":t[3]||(t[3]=s=>l.value=s),maxlength:"50",type:"password","show-password":"",placeholder:o(e)("app.webui.newpassword"),size:"large","prefix-icon":o(D),clearable:"",onBlur:_},null,8,["modelValue","placeholder","prefix-icon"]),p(c,{style:{width:"75%","margin-left":"10%",padding:"15px"},modelValue:n.value,"onUpdate:modelValue":t[4]||(t[4]=s=>n.value=s),maxlength:"50",type:"password","show-password":"",placeholder:o(e)("app.webui.confirmpassword"),size:"large","prefix-icon":o(L),clearable:"",onBlur:z},null,8,["modelValue","placeholder","prefix-icon"]),x("div",J,[p(A,{href:"#/login"},{default:d(()=>[h(g(o(e)("app.webui.returnlogin")),1)]),_:1})]),p(b,{type:"success",size:"large",style:{width:"60%",margin:"2% 20%","margin-bottom":"20px","font-weight":"bold","font-size":"16px"},onClick:C,"auto-insert-space":""},{default:d(()=>[h(g(o(e)("app.webui.submit")),1)]),_:1})]),_:1},8,["header"])])}}}),X=q(K,[["__scopeId","data-v-55cd57e0"]]);export{X as default};
