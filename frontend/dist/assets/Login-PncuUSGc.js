import{d as h,u as v,y as x,r as w,o as y,c as k,b as s,w as l,i as t,g as V,h as I,z as E,A as S,B as z,e as B,k as u,t as d,C as r,f as C,D as L,F as N,x as D,G as K,_ as M}from"./index-BZXfLavj.js";/* empty css                *//* empty css                *//* empty css                 *//* empty css                   */const T={class:"login-container"},U={class:"login-option"},A=h({__name:"Login",setup(F){const{t:e}=v(),c=x(),n=w(""),i=w("");y(()=>{sessionStorage.getItem("token")!=null&&c.push("/")});async function m(){if(n.value==""||i.value==""){r.error(e("app.webui.loginerr1"));return}try{const a=await C.post("/api/v1/login",{username:n.value,password:i.value});a.data.code==0&&r.error(e("app.webui.loginerr3")),a.data.code==1&&(L({title:e("app.webui.loginsucc"),message:a.data.username+", "+e("app.webui.welcome"),type:"success"}),await new Promise(o=>setTimeout(o,1e3)),sessionStorage.setItem("token",a.data.token),sessionStorage.setItem("username",a.data.username),a.data.avatar!=""?sessionStorage.setItem("avatar","/download/file?id="+a.data.avatar):sessionStorage.setItem("avatar","/avatar.svg"),c.push("/")),a.data.code==2&&r.error(e("app.webui.inputformaterror")),a.data.code==3&&r.error(e("app.webui.loginerr4")+" "+a.data.times+" "+e("app.webui.times"))}catch{r.error(e("app.webui.loginerr2"))}}return(a,o)=>{const g=N,f=D,_=K,b=V;return I(),k("div",T,[s(b,{class:"login-card",header:t(e)("app.webui.login"),shadow:"always"},{default:l(()=>[s(g,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=p=>n.value=p),maxlength:"50",placeholder:t(e)("app.webui.username"),size:"large","prefix-icon":t(E),clearable:""},null,8,["modelValue","placeholder","prefix-icon"]),s(g,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=p=>i.value=p),maxlength:"50",type:"password","show-password":"",placeholder:t(e)("app.webui.password"),size:"large","prefix-icon":t(S),clearable:"",onKeyup:z(m,["enter","native"])},null,8,["modelValue","placeholder","prefix-icon"]),B("div",U,[s(f,{href:"#/forgotpwd",style:{"margin-right":"10px"}},{default:l(()=>[u(d(t(e)("app.webui.forgot")),1)]),_:1}),s(f,{href:"#/register"},{default:l(()=>[u(d(t(e)("app.webui.register")),1)]),_:1})]),s(_,{type:"success",size:"large",style:{width:"60%",margin:"2% 20%","margin-bottom":"20px","font-weight":"bold","font-size":"16px"},onClick:m,"auto-insert-space":""},{default:l(()=>[u(d(t(e)("app.webui.login")),1)]),_:1})]),_:1},8,["header"])])}}}),H=M(A,[["__scopeId","data-v-9fcbb610"]]);export{H as default};
