import{d as U,u as Z,r as u,c as I,b as p,w as d,i as o,g as N,h as w,e as x,a4 as $,j as y,k as h,t as g,a6 as D,A as j,C as a,f as k,F as G,G as L,a7 as M,x as S,_ as T}from"./index-JDjDOS_H.js";/* empty css                *//* empty css                *//* empty css                     *//* empty css                 *//* empty css                   */const q={class:"forgot-container"},H={style:{display:"flex","align-items":"center"}},J={class:"forgot-option"},K=U({__name:"Forgotpwd",setup(O){const{t:e}=Z(),l=u(""),n=u(""),r=u(""),m=u(""),f=u(!0),v=u(0);function V(){if(r.value==""){a.error(e("app.webui.emailempty"));return}if(!r.value.match(/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/)){a.error(e("app.webui.emailformat"));return}}function b(){return l.value==""?(a.error(e("app.webui.passwordempty")),!1):l.value.length<8?(a.error(e("app.webui.passwordlength")),!1):l.value.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,}$/)?!0:(a.error(e("app.webui.passwordcomplex")),!1)}function z(){if(l.value!=n.value){a.error(e("app.webui.passwordnotmatch"));return}}async function C(){if(r.value==""){a.error(e("app.webui.emailempty"));return}try{(await k.get("/api/v1/getcaptcha?email="+r.value)).data.code==1?(a.success(e("app.webui.captchasucc")),v.value=Date.now()+1e3*120,f.value=!1):a.error(e("app.webui.captchafail"))}catch{}}async function B(){if(l.value==""||n.value==""||r.value==""){a.error(e("app.webui.missingnotice"));return}if(l.value!=n.value){a.error(e("app.webui.passwordnotmatch"));return}if(b())try{const i={password:n.value,email:r.value,captcha:m.value};(await k.post("/api/v1/forgetpassword",i)).data.code==1?a.success(e("app.webui.submitsuccess")):a.error(e("app.webui.restfail"))}catch{a.error(e("app.webui.restfail"))}}return(i,t)=>{const c=G,_=L,E=M,A=S,F=N;return w(),I("div",q,[p(F,{class:"forgot-card",header:o(e)("app.webui.forgot"),shadow:"always"},{default:d(()=>[x("div",H,[p(c,{style:{width:"75%","margin-left":"10%",padding:"15px"},modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),maxlength:"50",placeholder:o(e)("app.webui.email"),size:"large","prefix-icon":o($),clearable:"",onBlur:V},null,8,["modelValue","placeholder","prefix-icon"]),f.value?(w(),y(_,{key:0,style:{width:"15%"},type:"primary",size:"small",onClick:C},{default:d(()=>[h(g(o(e)("app.webui.getcaptcha")),1)]),_:1})):(w(),y(E,{key:1,format:"ss",value:v.value,onFinish:t[1]||(t[1]=s=>f.value=!0),"value-style":"font-size: 14px;"},null,8,["value"]))]),p(c,{style:{width:"75%","margin-left":"10%",padding:"15px"},modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),maxlength:"50",placeholder:o(e)("app.webui.captcha"),size:"large","prefix-icon":i.Camera,clearable:""},null,8,["modelValue","placeholder","prefix-icon"]),p(c,{style:{width:"75%","margin-left":"10%",padding:"15px"},modelValue:l.value,"onUpdate:modelValue":t[3]||(t[3]=s=>l.value=s),maxlength:"50",type:"password","show-password":"",placeholder:o(e)("app.webui.newpassword"),size:"large","prefix-icon":o(D),clearable:"",onBlur:b},null,8,["modelValue","placeholder","prefix-icon"]),p(c,{style:{width:"75%","margin-left":"10%",padding:"15px"},modelValue:n.value,"onUpdate:modelValue":t[4]||(t[4]=s=>n.value=s),maxlength:"50",type:"password","show-password":"",placeholder:o(e)("app.webui.confirmpassword"),size:"large","prefix-icon":o(j),clearable:"",onBlur:z},null,8,["modelValue","placeholder","prefix-icon"]),x("div",J,[p(A,{href:"#/login"},{default:d(()=>[h(g(o(e)("app.webui.returnlogin")),1)]),_:1})]),p(_,{type:"success",size:"large",style:{width:"60%",margin:"2% 20%","margin-bottom":"20px","font-weight":"bold","font-size":"16px"},onClick:B,"auto-insert-space":""},{default:d(()=>[h(g(o(e)("app.webui.submit")),1)]),_:1})]),_:1},8,["header"])])}}}),ee=T(K,[["__scopeId","data-v-cc7a86b8"]]);export{ee as default};
